= form_tag search_project_hosts_path(@project), method: :get, action: :search, class: "navbar-form navbar-right", role: "search" do
  .input-group
    = text_field_tag :search, nil,
      class: "form-control",
      placeholder: "Search IP e.g. 172.16"
    .input-group-btn
      = button_tag 'Search', class: "btn btn-success", type: "submit" do
        %span.glyphicon.glyphicon-search{aria_hidden: true}

= form_for @project, remote: true, html: { id: 'host_enable' } do |f|
  %table.table.table-striped
    %thead.th-bg
      %tr
        %th HID
        %th IP Address
        %th FQDN
        %th Operating System
        %th.text-center{ colspan: 4 } Risk Level
        %th{ width: 40 }
        %th{ width: 40 }
        %th{ width: 40 }
        %th{ width: 40 }

    %tbody
      - @hosts.each do |host|
        %tr
          %td= host.id
          %td= host.ip
          %td= host.fqdn ||= host.netbios_name
          %td= host.operating_system
          %td
            - if !host.findings.where(severity: 4).empty?
              .circle{ style: "background-color:red" }
                %span
          %td
            - if !host.findings.where(severity: 3).empty?
              .circle{ style: "background-color:orange" }
                %span
          %td
            - if !host.findings.where(severity: 2).empty?
              .circle{ style: "background-color:yellow" }
                %span
          %td
            - if !host.findings.where(severity: 1).empty?
              .circle{ style: "background-color:green" }
                %span
          %td.text-center
            = link_to host_findings_path(host), class: "btn btn-sm btn-default" do
              %span.glyphicon.glyphicon-th-list{aria_hidden: "true"}
              Findings
          %td.text-center
            = link_to edit_host_path(host), class: "btn btn-sm btn-default" do
              %span.glyphicon.glyphicon-edit{aria_hidden: "true"}
              Edit
          %td
            = link_to select_data_source_host_path(host), class: "btn btn-sm btn-default" do
              %span.glyphicon.glyphicon-transfer{aria_hidden: "true"}
              Move
          %td.text-center
            = check_box_tag :host_ids, host.id, host.enable
            -# = link_to host, method: :delete, data: { confirm: 'Are you sure?' } do
            -#   %span.glyphicon.glyphicon-trash{aria_hidden: "true"}
%div{ align: "center" }
  = will_paginate @hosts

= link_to 'Back', project_path(@project), class: "btn btn-primary"

-# #myModal.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog"}
